- [Шаблоны настроек](#шаблоны-настроек)
  - [Как использовать](#как-использовать)
  - [Как настраивать](#как-настраивать)
    - [Шаблон "Большой"](#шаблон-большой)
    - [Шаблон "Облегчённый"](#шаблон-облегчённый)
    - [Как настроить при первом запуске (подходит для обоих шаблонов)](#как-настроить-при-первом-запуске-подходит-для-обоих-шаблонов)
    - [Важно!](#важно)

# Шаблоны настроек

Это шаблоны настроек для образа Docker: https://hub.docker.com/r/wiktorbgu/mihomo-mikrotik

## Как использовать

Обычно шаблоны копируют по SFTP в папку на роутере:
/usb1/docker_configs/mihomo_mikrotik/template

## Как настраивать

Нужно указать нужный шаблон в переменных окружения (ENV) вашего контейнера. В самих файлах шаблонов есть пояснения, чем они отличаются.

### Шаблон "Большой"

Если вы хотите ВСЁ: все функции, все настройки, все переключатели — выбирайте этот.  
Но:  
- Много переключателей — можно запутаться  
- Использует около 40 МБ оперативной памяти (и даже больше, если включить всё подряд)

Чтобы использовать:
 `CONFIG="stargate.yaml"`

Команда для MikroTik:
 ```
/container envs add list=MIHOMO key=CONFIG value="stargate.yaml"
 ```

### Шаблон "Облегчённый"

- Лучше подходит для дома. Проще, быстрее и легче.  
- Потребляет около 20 МБ памяти.

Чтобы использовать:
`CONFIG="stargate-lite.yaml"`

Команда для MikroTik:
 ```
/container envs add list=MIHOMO key=CONFIG value="stargate-lite.yaml"
 ```

### Как настроить при первом запуске (подходит для обоих шаблонов)

1. Найдите переключатель с названием SELECTOR и выберите нужный режим работы 
   * автоматический - PROXY AUTO
   * ручной - PROXY MANUAL

2. В режиме PROXY AUTO автоматики выбирается быстрейщий (PROXY FASTEST) и жизнеспособный (PROXY FAILOVER) прокси из подписок.

3. Если хотите отправлять определённые сайты через конкретный сервер выберите его внутри PROXY MANUAL
4. Выбирайте серверы или правила для отдельных сервисов так, как вам удобно

В самих файлах шаблонов есть комментарии — читайте их, если что-то непонятно.



### Важно!

Не трогайте переключатели с типами "Fallback" или "URLTest".  
Если вы их случайно измените — автоматическая логика перестанет работать правильно.

Как починить и вернуть автоматизацию?  
- Кликните правой кнопкой мыши на название сбитого переключателя, это восстановит его логику.

Больше информации читайте здесь:  
https://hub.docker.com/r/wiktorbgu/mihomo-mikrotik